<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient and Family-Centered Care Course</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css">
    <style>
        /* Custom styles */
        .slide {
            display: none;
        }
        .slide.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        .modal.show {
            display: flex;
        }
        .modal-content {
            background-color: white;
            border-radius: 8px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
            position: relative;
            animation: modalSlideIn 0.3s ease;
        }
        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .progress-bar {
            height: 5px;
            background-color: #e2e8f0;
            width: 100%;
            position: relative;
        }
        .progress-fill {
            height: 100%;
            background-color: #1a56db;
            width: 0%;
            transition: width 0.3s ease;
        }
        /* Ensure sections are hidden by default if JS fails or before it runs */
        .container.mx-auto.px-4.py-8 > section:not(#home) {
             display: none;
        }
         /* Style for the initially visible home section */
         /* section#home { */
             /* display: block; /* Ensure home is visible initially (can also be handled by JS) */
         /* } */

        /* Styles from original file */
        .case-study, .lecture-slides, .game-container, .quiz-container, .resource-library {
             /* These specific classes might be redundant if using IDs correctly with JS */
            /* display: none;  */ /* Let JS handle display based on ID */
        }
        .signature-name {
            margin-bottom: 0.5rem;
            border-bottom: 1px solid #2d3748;
            padding-bottom: 0.5rem;
        }
        .slide-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #cbd5e0;
            cursor: pointer;
            transition: background-color 0.3s;
            display: inline-block;
            margin: 0 3px;
        }
        .slide-dot.active {
            background-color: #1a56db;
        }
        /* Game styles */
        .scenario-container {
            background-color: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .choice-btn {
            width: 100%;
            text-align: left;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            background-color: #f8fafc;
            transition: all 0.3s;
        }
        .choice-btn:hover {
            background-color: #edf2f7;
            transform: translateY(-2px);
        }
        .feedback-container {
            background-color: #f0f7ff;
            border-left: 4px solid #1a56db;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
            display: none;
        }
        .reflection-container {
            margin-top: 1.5rem;
            display: none;
        }
        .quiz-option {
            padding: 1rem;
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            padding-left: 2.5rem;
        }
        .quiz-option:hover {
            background-color: #e1effe;
            transform: translateX(5px);
        }
        .quiz-option::before {
            content: "";
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            border: 1px solid #cbd5e0;
            border-radius: 50%;
        }
        .quiz-option.selected {
            background-color: #1a56db;
            color: white;
            border-color: #1a56db;
        }
        .quiz-option.selected::before {
            background-color: white;
            border-color: white;
        }
        .quiz-feedback {
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        .quiz-feedback.correct {
            background-color: #c6f6d5;
            color: #22543d;
            border-left: 4px solid #38a169;
        }
        .quiz-feedback.incorrect {
            background-color: #fed7d7;
            color: #822727;
            border-left: 4px solid #e53e3e;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <header class="bg-blue-700 text-white py-6 px-4 md:px-8">
        <div class="container mx-auto">
            <div class="flex flex-wrap justify-between items-center">
                <h1 class="text-2xl font-bold">Patient and Family-Centered Care</h1>
                <div class="text-right">
                    <p class="text-sm">One-Week Intensive Course</p>
                    <p class="text-sm">Professional Development for Healthcare Providers</p>
                </div>
            </div>
        </div>
    </header>

    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto">
            <ul class="flex flex-wrap text-sm md:text-base">
                <li><a href="#home" class="nav-link active block px-4 py-3 font-medium hover:text-blue-700 border-b-2 border-blue-700 transition-colors" onclick="showSection('home'); return false;">Home</a></li>
                <li><a href="#lectures" class="nav-link block px-4 py-3 font-medium hover:text-blue-700 border-b-2 border-transparent hover:border-blue-700 transition-colors" onclick="showSection('lectures'); return false;">Lectures</a></li>
                <li><a href="#case-studies" class="nav-link block px-4 py-3 font-medium hover:text-blue-700 border-b-2 border-transparent hover:border-blue-700 transition-colors" onclick="showSection('case-studies'); return false;">Case Studies</a></li>
                <li><a href="#quizzes" class="nav-link block px-4 py-3 font-medium hover:text-blue-700 border-b-2 border-transparent hover:border-blue-700 transition-colors" onclick="showSection('quizzes'); return false;">Quizzes</a></li>
                <li><a href="#resources" class="nav-link block px-4 py-3 font-medium hover:text-blue-700 border-b-2 border-transparent hover:border-blue-700 transition-colors" onclick="showSection('resources'); return false;">Resources</a></li>
                <li><a href="#game" class="nav-link block px-4 py-3 font-medium hover:text-blue-700 border-b-2 border-transparent hover:border-blue-700 transition-colors" onclick="showSection('game'); return false;">Interactive Game</a></li>
            </ul>
        </div>
    </nav>

    <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
    </div>

    <div class="container mx-auto px-4 py-8">
        <section id="home" class="mb-16">
            <div class="flex flex-col md:flex-row gap-8 mb-8">
                 <div class="flex-1">
                     <h2 class="text-2xl font-bold text-blue-800 mb-4">Welcome to Patient and Family-Centered Care</h2>
                     <p class="mb-4">This one-week intensive course is designed to provide healthcare professionals with the knowledge and skills needed to implement patient and family-centered care approaches in various healthcare settings.</p>
                     <p class="mb-4">The course combines theoretical foundations with practical case studies and interactive learning to help you transform your practice.</p>
                     <div class="mt-6">
                         <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded font-medium hover:bg-blue-800 transition-colors" onclick="showSection('lectures'); return false;">Start Learning</button>
                         <button class="inline-block px-4 py-2 border border-blue-700 text-blue-700 rounded font-medium ml-2 hover:bg-blue-50 transition-colors" onclick="showModal('welcome-modal'); return false;">Course Overview</button>
                     </div>
                 </div>
                 <div class="flex-1">
                     <div class="bg-blue-50 p-6 rounded-lg border-l-4 border-blue-700">
                         <h3 class="text-xl font-semibold mb-4">Course Highlights</h3>
                         <p class="flex items-center mb-3"><i class="fas fa-calendar-alt text-blue-700 mr-3"></i> <strong>Duration:</strong> One-week intensive (Monday to Friday)</p>
                         <p class="flex items-center mb-3"><i class="fas fa-book text-blue-700 mr-3"></i> <strong>5 Lectures:</strong> Comprehensive modules covering all aspects of PFCC</p>
                         <p class="flex items-center mb-3"><i class="fas fa-user-md text-blue-700 mr-3"></i> <strong>5 Case Studies:</strong> Real-world applications and examples</p>
                         <p class="flex items-center mb-3"><i class="fas fa-tasks text-blue-700 mr-3"></i> <strong>Interactive Quizzes:</strong> Test your knowledge as you learn</p>
                         <p class="flex items-center mb-3"><i class="fas fa-certificate text-blue-700 mr-3"></i> <strong>Certificate:</strong> Upon successful completion of the course</p>
                     </div>
                 </div>
             </div>

             <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                 <h3 class="text-xl font-bold text-blue-800 mb-4 pb-2 border-b border-blue-100">The Four Core Principles</h3>
                 <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-6">
                     <div class="p-4 text-center rounded-lg hover:shadow-md transition-all transform hover:-translate-y-1 border-t-2 border-transparent hover:border-blue-700">
                         <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                             <i class="fas fa-user-shield text-blue-700 text-xl"></i>
                         </div>
                         <h4 class="font-semibold mb-2">Dignity and Respect</h4>
                         <p class="text-sm">Healthcare practitioners listen to and honor patient and family perspectives and choices.</p>
                     </div>
                     <div class="p-4 text-center rounded-lg hover:shadow-md transition-all transform hover:-translate-y-1 border-t-2 border-transparent hover:border-blue-700">
                         <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                             <i class="fas fa-share-alt text-blue-700 text-xl"></i>
                         </div>
                         <h4 class="font-semibold mb-2">Information Sharing</h4>
                         <p class="text-sm">Communicating complete and unbiased information with patients and families in affirming ways.</p>
                     </div>
                     <div class="p-4 text-center rounded-lg hover:shadow-md transition-all transform hover:-translate-y-1 border-t-2 border-transparent hover:border-blue-700">
                         <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                             <i class="fas fa-users text-blue-700 text-xl"></i>
                         </div>
                         <h4 class="font-semibold mb-2">Participation</h4>
                         <p class="text-sm">Patients and families are encouraged and supported in care and decision-making at their chosen level.</p>
                     </div>
                     <div class="p-4 text-center rounded-lg hover:shadow-md transition-all transform hover:-translate-y-1 border-t-2 border-transparent hover:border-blue-700">
                         <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                             <i class="fas fa-hands-helping text-blue-700 text-xl"></i>
                         </div>
                         <h4 class="font-semibold mb-2">Collaboration</h4>
                         <p class="text-sm">Patients, families, and healthcare practitioners collaborate in policy, program development, and care delivery.</p>
                     </div>
                 </div>
             </div>

             <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                 <h3 class="text-xl font-bold text-blue-800 mb-4">Weekly Schedule</h3>
                 <div class="overflow-auto">
                     <table class="w-full border-collapse">
                         <thead class="bg-blue-700 text-white">
                             <tr>
                                 <th class="border px-4 py-2 text-left">Day</th>
                                 <th class="border px-4 py-2 text-left">Morning Session (9am-12pm)</th>
                                 <th class="border px-4 py-2 text-left">Afternoon Session (1pm-4pm)</th>
                             </tr>
                         </thead>
                         <tbody>
                             <tr class="hover:bg-blue-50">
                                 <td class="border px-4 py-2">Monday</td>
                                 <td class="border px-4 py-2">Lecture 1: Foundations of PFCC</td>
                                 <td class="border px-4 py-2">Case Study 1: Bronson Methodist Hospital</td>
                             </tr>
                             <tr class="bg-gray-50 hover:bg-blue-50">
                                 <td class="border px-4 py-2">Tuesday</td>
                                 <td class="border px-4 py-2">Lecture 2: Core Principles in Practice</td>
                                 <td class="border px-4 py-2">Case Study 2: Pediatric ICU Family Involvement</td>
                             </tr>
                             <tr class="hover:bg-blue-50">
                                 <td class="border px-4 py-2">Wednesday</td>
                                 <td class="border px-4 py-2">Lecture 3: Communication Skills for PFCC</td>
                                 <td class="border px-4 py-2">Case Study 3: NICU Design with Patient/Family Input</td>
                             </tr>
                             <tr class="bg-gray-50 hover:bg-blue-50">
                                 <td class="border px-4 py-2">Thursday</td>
                                 <td class="border px-4 py-2">Lecture 4: Building Systems to Support PFCC</td>
                                 <td class="border px-4 py-2">Case Study 4: Emergency Department PFCC Implementation</td>
                             </tr>
                             <tr class="hover:bg-blue-50">
                                 <td class="border px-4 py-2">Friday</td>
                                 <td class="border px-4 py-2">Lecture 5: Measuring and Improving PFCC Outcomes</td>
                                 <td class="border px-4 py-2">Case Study 5: Chronic Disease Management Partnerships</td>
                             </tr>
                         </tbody>
                     </table>
                 </div>
                 <p class="text-sm mt-2">* Daily assessment quizzes will be available following each lecture and case study.</p>
             </div>

             <div class="bg-white rounded-lg shadow-md p-6">
                 <h3 class="text-xl font-bold text-blue-800 mb-4">Learning Outcomes</h3>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-4">
                     <div>
                         <h4 class="flex items-center font-semibold mb-3">
                             <i class="fas fa-check-circle text-green-600 mr-2"></i> Knowledge
                         </h4>
                         <ul class="ml-6 space-y-2">
                             <li class="relative pl-5">
                                 <span class="absolute left-0 top-2 w-2 h-2 bg-blue-700 rounded-full"></span>
                                 Define Patient and Family-Centered Care and its importance
                             </li>
                             <li class="relative pl-5">
                                 <span class="absolute left-0 top-2 w-2 h-2 bg-blue-700 rounded-full"></span>
                                 Identify the four core principles of PFCC
                             </li>
                             <li class="relative pl-5">
                                 <span class="absolute left-0 top-2 w-2 h-2 bg-blue-700 rounded-full"></span>
                                 Explain how PFCC evolved historically in healthcare
                             </li>
                             <li class="relative pl-5">
                                 <span class="absolute left-0 top-2 w-2 h-2 bg-blue-700 rounded-full"></span>
                                 Discuss the evidence supporting PFCC implementation
                             </li>
                         </ul>
                     </div>
                     <div>
                         <h4 class="flex items-center font-semibold mb-3">
                             <i class="fas fa-tools text-blue-600 mr-2"></i> Skills
                         </h4>
                         <ul class="ml-6 space-y-2">
                             <li class="relative pl-5">
                                 <span class="absolute left-0 top-2 w-2 h-2 bg-blue-700 rounded-full"></span>
                                 Apply PFCC principles in clinical practice
                             </li>
                             <li class="relative pl-5">
                                 <span class="absolute left-0 top-2 w-2 h-2 bg-blue-700 rounded-full"></span>
                                 Develop effective communication strategies
                             </li>
                             <li class="relative pl-5">
                                 <span class="absolute left-0 top-2 w-2 h-2 bg-blue-700 rounded-full"></span>
                                 Implement systems that support PFCC
                             </li>
                             <li class="relative pl-5">
                                 <span class="absolute left-0 top-2 w-2 h-2 bg-blue-700 rounded-full"></span>
                                 Measure and evaluate PFCC outcomes
                             </li>
                         </ul>
                     </div>
                 </div>
             </div>
        </section>

        <section id="lectures" class="mb-16" style="display:none;">
             <h2 class="text-2xl font-bold text-blue-800 mb-4">Course Lectures</h2>
             <p class="mb-6">Select a lecture to view its content:</p>
             
             <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                 <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                     <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                         <h3 class="font-medium">Lecture 1</h3>
                         <p class="text-sm text-gray-600">Foundations of PFCC</p>
                     </div>
                     <div class="p-4">
                         <p class="text-sm mb-4">An introduction to the core concepts and historical development of Patient and Family-Centered Care.</p>
                         <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="showLecture(1)">View Lecture</button>
                     </div>
                 </div>
                 <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                    <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                        <h3 class="font-medium">Lecture 2</h3>
                        <p class="text-sm text-gray-600">Core Principles in Practice</p>
                    </div>
                    <div class="p-4">
                        <p class="text-sm mb-4">Practical application of the four core PFCC principles in different healthcare settings.</p>
                        <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="showLecture(2)">View Lecture</button>
                    </div>
                 </div>
                 <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                     <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                         <h3 class="font-medium">Lecture 3</h3>
                         <p class="text-sm text-gray-600">Communication Skills for PFCC</p>
                     </div>
                     <div class="p-4">
                         <p class="text-sm mb-4">Essential communication strategies that support effective implementation of PFCC.</p>
                         <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="showLecture(3)">View Lecture</button>
                     </div>
                 </div>
                 <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                     <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                         <h3 class="font-medium">Lecture 4</h3>
                         <p class="text-sm text-gray-600">Building Systems to Support PFCC</p>
                     </div>
                     <div class="p-4">
                         <p class="text-sm mb-4">Organizational approaches to implement and sustain PFCC at the system level.</p>
                         <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="showLecture(4)">View Lecture</button>
                     </div>
                 </div>
                 <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                     <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                         <h3 class="font-medium">Lecture 5</h3>
                         <p class="text-sm text-gray-600">Measuring and Improving PFCC Outcomes</p>
                     </div>
                     <div class="p-4">
                         <p class="text-sm mb-4">Methods for evaluating PFCC implementation and using data to drive improvements.</p>
                         <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="showLecture(5)">View Lecture</button>
                     </div>
                 </div>
             </div>
             
             <div id="lecture1" class="lecture-slides bg-white rounded-lg shadow-md" style="display:none;"> LECTURE 1 CONTENT AREA </div>
             <div id="lecture2" class="lecture-slides bg-white rounded-lg shadow-md" style="display:none;"> LECTURE 2 CONTENT AREA </div>
             <div id="lecture3" class="lecture-slides bg-white rounded-lg shadow-md" style="display:none;"> LECTURE 3 CONTENT AREA </div>
             <div id="lecture4" class="lecture-slides bg-white rounded-lg shadow-md" style="display:none;"> LECTURE 4 CONTENT AREA </div>
             <div id="lecture5" class="lecture-slides bg-white rounded-lg shadow-md" style="display:none;"> LECTURE 5 CONTENT AREA </div>
             </section>
        
        <section id="case-studies" class="mb-16" style="display:none;">
             <h2 class="text-2xl font-bold text-blue-800 mb-4">Case Studies</h2>
             <p class="mb-6">Explore real-world applications of Patient and Family-Centered Care through these detailed case studies from diverse healthcare settings.</p>
             
             <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                 <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                    <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                        <h3 class="font-medium">Case Study 1</h3>
                        <p class="text-sm text-gray-600">Bronson Methodist Hospital PFCC Implementation</p>
                    </div>
                    <div class="p-4">
                        <p class="text-sm mb-4">How a hospital transformed its organizational culture to fully embrace PFCC principles.</p>
                        <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="showCaseStudy(1)">View Case Study</button>
                    </div>
                 </div>
                  <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                    <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                        <h3 class="font-medium">Case Study 2</h3>
                        <p class="text-sm text-gray-600">Pediatric ICU Family Involvement Model</p>
                    </div>
                    <div class="p-4">
                        <p class="text-sm mb-4">How a children's hospital integrated families into PICU care and decision-making.</p>
                        <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="showCaseStudy(2)">View Case Study</button>
                    </div>
                </div>
                 <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                    <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                        <h3 class="font-medium">Case Study 3</h3>
                        <p class="text-sm text-gray-600">NICU Design with Patient/Family Input</p>
                    </div>
                    <div class="p-4">
                        <p class="text-sm mb-4">How a hospital redesigned their NICU with extensive input from families.</p>
                        <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="showCaseStudy(3)">View Case Study</button>
                    </div>
                </div>
                 <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                    <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                        <h3 class="font-medium">Case Study 4</h3>
                        <p class="text-sm text-gray-600">Emergency Department PFCC Implementation</p>
                    </div>
                    <div class="p-4">
                        <p class="text-sm mb-4">How an ED implemented PFCC principles in a high-acuity, fast-paced environment.</p>
                        <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="showCaseStudy(4)">View Case Study</button>
                    </div>
                </div>
                 <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                    <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                        <h3 class="font-medium">Case Study 5</h3>
                        <p class="text-sm text-gray-600">Chronic Disease Management Partnerships</p>
                    </div>
                    <div class="p-4">
                        <p class="text-sm mb-4">A regional diabetes management program implementing PFCC principles across diverse settings.</p>
                        <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="showCaseStudy(5)">View Case Study</button>
                    </div>
                </div>
             </div>
             
             <div id="case-study1" class="case-study bg-white rounded-lg shadow-md p-6" style="display:none;"> CASE STUDY 1 CONTENT AREA </div>
             <div id="case-study2" class="case-study bg-white rounded-lg shadow-md p-6" style="display:none;"> CASE STUDY 2 CONTENT AREA </div>
             <div id="case-study3" class="case-study bg-white rounded-lg shadow-md p-6" style="display:none;"> CASE STUDY 3 CONTENT AREA </div>
             <div id="case-study4" class="case-study bg-white rounded-lg shadow-md p-6" style="display:none;"> CASE STUDY 4 CONTENT AREA </div>
             <div id="case-study5" class="case-study bg-white rounded-lg shadow-md p-6" style="display:none;"> CASE STUDY 5 CONTENT AREA </div>
              </section>
        
        <section id="quizzes" class="mb-16" style="display:none;">
             <h2 class="text-2xl font-bold text-blue-800 mb-4">Knowledge Assessment Quizzes</h2>
             <p class="mb-6">Test your understanding of PFCC concepts through these interactive quizzes.</p>
             
             <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                 <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                     <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                         <h3 class="font-medium">Quiz 1</h3>
                         <p class="text-sm text-gray-600">Foundations of PFCC</p>
                     </div>
                     <div class="p-4">
                         <p class="text-sm mb-4">10 questions testing your knowledge of PFCC concepts and principles.</p>
                         <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="loadQuiz(1)">Start Quiz</button>
                     </div>
                 </div>
                  <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                     <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                         <h3 class="font-medium">Quiz 2</h3>
                         <p class="text-sm text-gray-600">Core Principles in Practice</p>
                     </div>
                     <div class="p-4">
                         <p class="text-sm mb-4">Test your understanding of how PFCC principles apply in practice.</p>
                         <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="loadQuiz(2)">Start Quiz</button>
                     </div>
                 </div>
                  <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                     <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                         <h3 class="font-medium">Quiz 3</h3>
                         <p class="text-sm text-gray-600">Communication Skills for PFCC</p>
                     </div>
                     <div class="p-4">
                         <p class="text-sm mb-4">Evaluate your knowledge of effective communication in PFCC.</p>
                         <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="loadQuiz(3)">Start Quiz</button>
                     </div>
                 </div>
                   <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                     <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                         <h3 class="font-medium">Quiz 4</h3>
                         <p class="text-sm text-gray-600">Building Systems to Support PFCC</p>
                     </div>
                     <div class="p-4">
                         <p class="text-sm mb-4">Test your knowledge of organizational approaches to PFCC implementation.</p>
                         <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="loadQuiz(4)">Start Quiz</button>
                     </div>
                 </div>
                  <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                     <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                         <h3 class="font-medium">Quiz 5</h3>
                         <p class="text-sm text-gray-600">Measuring and Improving PFCC Outcomes</p>
                     </div>
                     <div class="p-4">
                         <p class="text-sm mb-4">Evaluate your knowledge of PFCC measurement and improvement strategies.</p>
                         <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="loadQuiz(5)">Start Quiz</button>
                     </div>
                 </div>
                   <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                     <div class="p-4 bg-blue-50 border-l-4 border-blue-700">
                         <h3 class="font-medium">Quiz 6</h3>
                         <p class="text-sm text-gray-600">Cultural Aspects of PFCC</p>
                     </div>
                     <div class="p-4">
                         <p class="text-sm mb-4">Test your understanding of cultural considerations in PFCC implementation.</p>
                         <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded text-sm font-medium hover:bg-blue-800 transition-colors" onclick="loadQuiz(6)">Start Quiz</button>
                     </div>
                 </div>
             </div>
             
             <div id="quiz-container" class="quiz-container bg-white rounded-lg shadow-md p-6" style="display:none;">
                 <h3 id="quiz-title" class="text-xl font-bold text-blue-800 mb-4">Quiz Title</h3>
                 <div id="quiz-question" class="mb-6"></div>
                 <ul id="quiz-options" class="mb-6"></ul>
                 <div id="quiz-feedback" class="quiz-feedback"></div>
                 <div class="flex justify-between mt-6">
                     <button id="quiz-submit" class="px-4 py-2 bg-blue-700 text-white rounded font-medium hover:bg-blue-800 transition-colors">Submit Answer</button>
                     <button id="quiz-next" class="px-4 py-2 bg-blue-700 text-white rounded font-medium hover:bg-blue-800 transition-colors" style="display:none;">Next Question</button>
                 </div>
                 <div id="quiz-score-container" class="text-center my-8 p-6 bg-blue-50 rounded-lg hidden">
                     <h4 class="text-lg font-semibold mb-2">Quiz Complete!</h4>
                     <div class="w-24 h-24 bg-blue-700 rounded-full flex items-center justify-center text-white text-3xl font-bold mx-auto mb-4" id="quiz-badge">0%</div>
                     <p class="mb-4">You scored <span id="quiz-score">0</span> out of <span id="quiz-total">0</span> questions correctly.</p>
                     <button class="px-4 py-2 bg-blue-700 text-white rounded font-medium hover:bg-blue-800 transition-colors" onclick="showSection('quizzes')">Return to Quizzes</button>
                 </div>
             </div>
        </section>
        
        <section id="resources" class="mb-16" style="display:none;">
             <h2 class="text-2xl font-bold text-blue-800 mb-4">Resources</h2>
             <p class="mb-6">Access additional materials to deepen your understanding of Patient and Family-Centered Care.</p>
             
             <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                 <div class="bg-white rounded-lg shadow-md overflow-hidden"> RESOURCE 1 CARD AREA </div>
                 <div class="bg-white rounded-lg shadow-md overflow-hidden"> RESOURCE 2 CARD AREA </div>
                 <div class="bg-white rounded-lg shadow-md overflow-hidden"> RESOURCE 3 CARD AREA </div>
                 <div class="bg-white rounded-lg shadow-md overflow-hidden"> RESOURCE 4 CARD AREA </div>
                 <div class="bg-white rounded-lg shadow-md overflow-hidden"> RESOURCE 5 CARD AREA </div>
                 <div class="bg-white rounded-lg shadow-md overflow-hidden"> RESOURCE 6 CARD AREA </div>
                  </div>
             
             <div class="bg-white rounded-lg shadow-md p-6">
                 <h3 class="text-xl font-bold text-blue-800 mb-4">Research Publications</h3>
                 <ul class="divide-y">
                     <li class="py-4"> PUBLICATION 1 AREA </li>
                      <li class="py-4"> PUBLICATION 2 AREA </li>
                      <li class="py-4"> PUBLICATION 3 AREA </li>
                      <li class="py-4"> PUBLICATION 4 AREA </li>
                      </ul>
             </div>
        </section>
        
        <section id="game" class="mb-16" style="display:none;">
             <h2 class="text-2xl font-bold text-blue-800 mb-4">Interactive PFCC Scenario Game</h2>
             <p class="mb-6">Apply PFCC principles in realistic patient scenarios. Make choices and reflect on your approach.</p>
             
             <div id="game-container" class="game-container bg-white rounded-lg shadow-md p-6">
                 <div id="level-intro">
                     <h3 class="text-xl font-semibold text-blue-800 mb-4">Home Visit Scenario</h3>
                     <p class="mb-4">You are visiting Fatima, a 45-year-old woman with type 2 diabetes, in her home for a follow-up assessment.</p>
                     <p class="mb-4">Fatima has been struggling with medication adherence. She lives with her husband and two teenage children.</p>
                     <button id="start-scenario" class="px-4 py-2 bg-blue-700 text-white rounded font-medium hover:bg-blue-800 transition-colors">Start Scenario</button>
                 </div>
                 
                 <div id="scenario-content" class="scenario-container" style="display:none;">
                      <h3 id="scenario-stage-title" class="text-xl font-semibold text-blue-800 mb-4">Introduction</h3>
                     <p id="scenario-prompt" class="mb-6">How do you begin your conversation with Fatima?</p>
                     <div id="scenario-choices" class="space-y-2 mb-6">
                         <button class="choice-btn" data-choice="medical">Let's check your blood glucose readings from the past week.</button>
                         <button class="choice-btn" data-choice="open">How have things been going for you since our last visit?</button>
                         <button class="choice-btn" data-choice="social">How are you and your family doing today?</button>
                     </div>
                     <div id="scenario-feedback" class="feedback-container"></div>
                     <div id="scenario-continue" class="mt-4" style="display:none;">
                         <button class="px-4 py-2 bg-blue-700 text-white rounded font-medium hover:bg-blue-800 transition-colors">Continue</button>
                     </div>
                 </div>
                 
                 <div id="reflection-container" class="reflection-container">
                     <h3 class="text-xl font-semibold text-blue-800 mb-4">Reflection</h3>
                     <p class="mb-2">Take a moment to reflect on your choices in this scenario.</p>
                     </div>
             </div>
        </section>

    </div> <footer class="bg-gray-800 text-gray-300 py-8 mt-16">
        <div class="container mx-auto text-center">
            <p>&copy; 2024 Dr. Avneet Kaur. All rights reserved.</p>
            <p>Patient and Family-Centered Care Course</p>
            </div>
    </footer>

    <div id="welcome-modal" class="modal"> WELCOME MODAL CONTENT AREA </div>
     <div id="lecture-completed-modal" class="modal"> LECTURE COMPLETED MODAL CONTENT AREA </div>
     <div id="case-completed-modal" class="modal"> CASE COMPLETED MODAL CONTENT AREA </div>
     <div id="certificate-modal" class="modal"> CERTIFICATE MODAL CONTENT AREA </div>
     <div id="bronson-resources" class="modal"> BRONSON RESOURCES MODAL CONTENT AREA </div>
     <div id="picu-resources" class="modal"> PICU RESOURCES MODAL CONTENT AREA </div>
     <script>
        // ==============================================================
        // CORE NAVIGATION / SECTION DISPLAY LOGIC
        // ==============================================================

        function showSection(sectionId) {
            // Hide all content sections (Corrected Selector)
            // This looks for <section> elements that have an 'id' attribute and are direct children of the main container div
            const sections = document.querySelectorAll('.container.mx-auto.px-4.py-8 > section[id]');
            sections.forEach(section => {
                section.style.display = 'none';
                // section.classList.remove('active'); // Only add active if needed by styling
            });

            // Show the target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.style.display = 'block';
                // targetSection.classList.add('active'); // Only add active if needed by styling
            } else {
                console.error("Section with ID '" + sectionId + "' not found!");
            }

            // Update active state for navigation links
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.classList.remove('active');
                // Correctly check the onclick attribute content
                const onclickAttr = link.getAttribute('onclick');
                if (onclickAttr && onclickAttr.includes("showSection('" + sectionId + "')")) {
                    link.classList.add('active');
                }
            });

            // Scroll to the top of the content area (optional)
            const container = document.querySelector('.container.mx-auto.px-4.py-8');
            if (container) {
                 window.scrollTo({ top: container.offsetTop - 80, behavior: 'smooth' }); // Adjust -80 if nav height is different
            } else {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

             // Update progress bar when section changes
             updateProgressBar();
        }

        // Make sure the initial section (home) is shown on page load
        document.addEventListener('DOMContentLoaded', function() {
            const initialSectionId = window.location.hash.substring(1);
            const validSectionIds = ['home', 'lectures', 'case-studies', 'quizzes', 'resources', 'game'];

            if (initialSectionId && validSectionIds.includes(initialSectionId)) {
                const sectionExists = document.getElementById(initialSectionId);
                if (sectionExists) {
                    showSection(initialSectionId);
                } else {
                     showSection('home');
                }
            } else {
                showSection('home'); // Show home section by default
            }

            // Initialize other features on load
            initializeProgressTracking();
            initializeLectureSlides();
            initializeCaseStudies();
            // Add initializations for game, modals, etc. if they have specific setup needs
             setupDownloadButtons(); // Setup download button behavior
             setupQuizButtons(); // Add event listeners to quiz start buttons
             setupGame(); // Initialize game elements
             setupModalButtons(); // Initialize buttons that open modals
        });


        // ==============================================================
        // MODAL HANDLING
        // ==============================================================
         function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'flex';
                 // Add 'show' class after a tiny delay to allow CSS transition
                 setTimeout(() => { modal.classList.add('show'); }, 10);
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                 modal.classList.remove('show');
                 // Wait for fade out animation before hiding
                 setTimeout(() => { modal.style.display = 'none'; }, 300); // Match animation duration
            }
        }

        // Close modal if clicking outside the content area
         window.addEventListener('click', function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target == modal) {
                    // Find the ID of the modal to close it correctly
                     const modalId = modal.id;
                     if (modalId) {
                         closeModal(modalId);
                     }
                }
            });
        });

         // Add event listeners to buttons that open modals (if not using inline onclick)
         function setupModalButtons() {
             // Example: If you have buttons with data attributes like data-modal-target="welcome-modal"
             document.querySelectorAll('[data-modal-target]').forEach(button => {
                 button.addEventListener('click', function() {
                     const modalId = this.getAttribute('data-modal-target');
                     if (modalId) {
                         showModal(modalId);
                     }
                 });
             });
              // Ensure the inline onclicks also work if present, like the one for 'Course Overview'
         }


        // ==============================================================
        // LECTURE SLIDES HANDLING
        // ==============================================================
         let lectureStates = {}; // { lecId: { currentSlide: 1, totalSlides: N }, ... }

         function initializeLectureSlides() {
             document.querySelectorAll('.lecture-slides').forEach(lectureContainer => {
                 const lectureId = lectureContainer.id; // e.g., 'lecture1'
                 const slides = lectureContainer.querySelectorAll('.slide');
                 if (slides.length > 0) {
                     lectureStates[lectureId] = { currentSlide: 1, totalSlides: slides.length };
                     updateSlideView(lectureId);
                     // Setup navigation specifically for this lecture
                     setupSlideNavigation(lectureId);
                 }
             });
         }

         function updateSlideView(lectureId) {
             const state = lectureStates[lectureId];
             if (!state) return;

             const lectureContainer = document.getElementById(lectureId);
             lectureContainer.querySelectorAll('.slide').forEach((slide, index) => {
                 slide.style.display = (index + 1 === state.currentSlide) ? 'block' : 'none';
                 slide.classList.toggle('active', index + 1 === state.currentSlide);
             });

             // Update dots
             lectureContainer.querySelectorAll('.slide-dot').forEach((dot, index) => {
                 dot.classList.toggle('active', index + 1 === state.currentSlide);
             });

             // Update counter
             const currentSlideSpan = lectureContainer.querySelector('.slide-counter span:first-of-type'); // More specific selector needed
             const totalSlidesSpan = lectureContainer.querySelector('.slide-counter span:last-of-type'); // More specific selector needed
             if (currentSlideSpan) currentSlideSpan.textContent = state.currentSlide;
             // Total slides span content typically doesn't change, set on init if needed

             // Update button states (optional: disable prev/next on first/last slide)
              const prevButton = lectureContainer.querySelector('.slide-buttons button:first-child');
              const nextButton = lectureContainer.querySelector('.slide-buttons button:last-child');
              if (prevButton) prevButton.disabled = (state.currentSlide === 1);
              if (nextButton) nextButton.disabled = (state.currentSlide === state.totalSlides);
         }

         function setupSlideNavigation(lectureId) {
             const lectureContainer = document.getElementById(lectureId);
             if (!lectureContainer) return;

             // Dot navigation
             lectureContainer.querySelectorAll('.slide-dot').forEach((dot, index) => {
                 dot.onclick = () => goToSlide(index + 1, lectureId);
             });

             // Button navigation
             const prevButton = lectureContainer.querySelector('.slide-buttons button:first-child');
             const nextButton = lectureContainer.querySelector('.slide-buttons button:last-child');
             if (prevButton) prevButton.onclick = () => prevSlide(lectureId);
             if (nextButton) nextButton.onclick = () => nextSlide(lectureId);

             // Update initial button states
              const state = lectureStates[lectureId];
              if (state && prevButton) prevButton.disabled = (state.currentSlide === 1);
              if (state && nextButton) nextButton.disabled = (state.currentSlide === state.totalSlides);
         }


         function nextSlide(lectureId) {
             const state = lectureStates[lectureId];
             if (state && state.currentSlide < state.totalSlides) {
                 state.currentSlide++;
                 updateSlideView(lectureId);
             }
              // Check if this is the last slide and mark lecture as completed
              if (state && state.currentSlide === state.totalSlides) {
                  markLectureCompleted(lectureId.replace('lecture','')); // Pass lecture number
              }
         }

         function prevSlide(lectureId) {
             const state = lectureStates[lectureId];
             if (state && state.currentSlide > 1) {
                 state.currentSlide--;
                 updateSlideView(lectureId);
             }
         }

         function goToSlide(slideNumber, lectureId) {
             const state = lectureStates[lectureId];
             if (state && slideNumber >= 1 && slideNumber <= state.totalSlides) {
                 state.currentSlide = slideNumber;
                 updateSlideView(lectureId);
                  // Check if going to the last slide marks completion
                 if (state.currentSlide === state.totalSlides) {
                     markLectureCompleted(lectureId.replace('lecture',''));
                 }
             }
         }

         // This is called by the buttons within the main Lectures section list
         function showLecture(lectureNum) {
             // Hide all lecture slide containers first? Depends on structure.
             // Let's assume showSection handles showing the #lectures section,
             // and this function just ensures the correct lecture *within* that section is shown.

             // We might not need this function if the slide containers are inside the #lectures section
             // and showSection reveals #lectures. Instead, clicking "View Lecture" could just
             // scroll to the specific lecture container.
             // Let's simplify: Assume clicking "View Lecture" just scrolls.

             const lectureElement = document.getElementById('lecture' + lectureNum);
             if (lectureElement) {
                  // Make sure the main lectures section is visible first
                  showSection('lectures');
                  // Then scroll to the specific lecture container
                 lectureElement.scrollIntoView({ behavior: 'smooth', block: 'start' });

                  // Ensure the lecture slides are visible if they were hidden initially
                  // This might conflict with showSection, adjust based on exact HTML structure
                  lectureElement.style.display = 'block';

                   // Initialize or reset slide state for this lecture
                  if (!lectureStates['lecture' + lectureNum]) {
                      initializeLectureSlides(); // Re-init if needed, or just specific one
                  } else {
                      // Reset to first slide? Or keep current state? Let's reset for now.
                      // lectureStates['lecture' + lectureNum].currentSlide = 1;
                      // updateSlideView('lecture' + lectureNum);
                  }


             } else {
                 console.error('Lecture element lecture' + lectureNum + ' not found');
             }
         }


        // ==============================================================
        // CASE STUDY HANDLING
        // ==============================================================
         function initializeCaseStudies() {
            // If specific initialization is needed for case studies
         }

         // This function shows a specific case study content div
         function showCaseStudy(caseNum) {
             // Make sure the main #case-studies section is visible
             showSection('case-studies');

             // Hide all individual case study divs first
             document.querySelectorAll('.case-study').forEach(cs => {
                 cs.style.display = 'none';
             });

             // Show the target case study div
             const targetCaseStudy = document.getElementById('case-study' + caseNum);
             if (targetCaseStudy) {
                 targetCaseStudy.style.display = 'block';
                 // Scroll to the case study
                 targetCaseStudy.scrollIntoView({ behavior: 'smooth', block: 'start' });
                  // Mark case study as viewed for progress tracking
                  markCaseStudyCompleted(caseNum);
             } else {
                 console.error('Case study element case-study' + caseNum + ' not found');
             }
         }

         // This function is called by the quiz button within a case study
         function takeCaseStudyQuiz(caseNum) {
              showSection('quizzes');
              loadQuiz(caseNum); // Assuming quiz numbers align with case study numbers
          }


        // ==============================================================
        // QUIZ HANDLING
        // ==============================================================
         // Quiz data (assuming this object exists - MUST BE DEFINED ELSEWHERE IN THE SCRIPT)
         const quizzes = { /* ... Quiz data structure from your original file ... */ }; // PLACEHOLDER

         let currentQuiz = null;
         let currentQuestionIndex = 0;
         let score = 0;
         let selectedAnswer = null;

         function setupQuizButtons() {
             // Add listeners to buttons like <button ... onclick="loadQuiz(1)">
             document.querySelectorAll('button[onclick^="loadQuiz"]').forEach(button => {
                 // Extract quiz number from onclick attribute
                 const match = button.getAttribute('onclick').match(/loadQuiz\((\d+)\)/);
                 if (match && match[1]) {
                     const quizNum = parseInt(match[1]);
                     // Prevent default if it's inside a form, etc., and add listener
                     button.addEventListener('click', function(e) {
                         e.preventDefault();
                         loadQuiz(quizNum);
                     });
                     // Remove the inline onclick to avoid double calls
                     button.removeAttribute('onclick');
                 }
             });

             // Setup submit and next buttons
              const submitButton = document.getElementById('quiz-submit');
              const nextButton = document.getElementById('quiz-next');

              if (submitButton) {
                  submitButton.addEventListener('click', submitAnswer);
              }
              if (nextButton) {
                  nextButton.addEventListener('click', nextQuestion);
              }
         }


         function loadQuiz(quizId) {
             currentQuiz = quizzes[quizId];
             if (!currentQuiz) {
                 console.error("Quiz ID " + quizId + " not found.");
                 return;
             }

             currentQuestionIndex = 0;
             score = 0;
             selectedAnswer = null;

             const quizContainer = document.getElementById('quiz-container');
             const quizListSection = document.getElementById('quizzes'); // Assuming the quiz list is inside the #quizzes section
             const quizScoreContainer = document.getElementById('quiz-score-container');

             // Ensure the main quizzes section is shown first
              showSection('quizzes');

             // Hide the list of quizzes (assuming it's the direct content of #quizzes before quiz-container)
             // This needs refinement based on actual structure - find the grid of quiz cards
             const quizCardGrid = quizListSection.querySelector('.grid'); // Adjust selector
             if (quizCardGrid) quizCardGrid.style.display = 'none';


             if (quizContainer) quizContainer.style.display = 'block';
             if (quizScoreContainer) quizScoreContainer.style.display = 'none'; // Hide score from previous quiz

             displayQuestion();
         }

         function displayQuestion() {
             if (!currentQuiz || currentQuestionIndex >= currentQuiz.questions.length) {
                 showScore();
                 return;
             }

             const questionData = currentQuiz.questions[currentQuestionIndex];
             const questionElement = document.getElementById('quiz-question');
             const optionsElement = document.getElementById('quiz-options');
             const titleElement = document.getElementById('quiz-title');
             const feedbackElement = document.getElementById('quiz-feedback');
             const submitButton = document.getElementById('quiz-submit');
             const nextButton = document.getElementById('quiz-next');

             if (titleElement) titleElement.textContent = currentQuiz.title + ` (Question ${currentQuestionIndex + 1} of ${currentQuiz.questions.length})`;
             if (questionElement) questionElement.textContent = questionData.question;
             if (optionsElement) optionsElement.innerHTML = ''; // Clear previous options
             if (feedbackElement) feedbackElement.style.display = 'none'; // Hide feedback

             selectedAnswer = null; // Reset selection

             questionData.options.forEach((option, index) => {
                 const li = document.createElement('li');
                 li.textContent = option;
                 li.classList.add('quiz-option');
                 li.dataset.index = index;
                 li.addEventListener('click', () => selectOption(li, index));
                 if(optionsElement) optionsElement.appendChild(li);
             });

             if (submitButton) submitButton.style.display = 'block';
             if (nextButton) nextButton.style.display = 'none';
         }

         function selectOption(element, index) {
             // Remove 'selected' from previously selected option if any
             const previouslySelected = document.querySelector('.quiz-option.selected');
             if (previouslySelected) {
                 previouslySelected.classList.remove('selected');
             }

             // Add 'selected' to the clicked option
             element.classList.add('selected');
             selectedAnswer = index;
         }

         function submitAnswer() {
             if (selectedAnswer === null || !currentQuiz) return; // No answer selected

             const questionData = currentQuiz.questions[currentQuestionIndex];
             const feedbackElement = document.getElementById('quiz-feedback');
             const submitButton = document.getElementById('quiz-submit');
             const nextButton = document.getElementById('quiz-next');
             const options = document.querySelectorAll('.quiz-option');

             if (!feedbackElement) return;

             // Disable further option clicks
             options.forEach(option => option.style.pointerEvents = 'none');

             if (selectedAnswer === questionData.correctAnswer) {
                 score++;
                 feedbackElement.textContent = "Correct! " + (questionData.explanation || "");
                 feedbackElement.className = 'quiz-feedback correct'; // Reset classes and add correct
                 options[selectedAnswer].classList.add('correct'); // Optionally style the correct selected answer
             } else {
                 feedbackElement.textContent = "Incorrect. " + (questionData.explanation || "");
                 feedbackElement.className = 'quiz-feedback incorrect'; // Reset classes and add incorrect
                 options[selectedAnswer].classList.add('incorrect'); // Optionally style the incorrect selected answer
                 // Highlight the actual correct answer
                 options[questionData.correctAnswer].classList.add('correct-answer-highlight'); // Add a class for styling correct answer
             }

             feedbackElement.style.display = 'block';
             if (submitButton) submitButton.style.display = 'none';
             if (nextButton) nextButton.style.display = 'block';

              // Mark quiz progress
              markQuizAttempted(currentQuiz.id); // Assuming quizzes have an id like 1, 2, ...
         }

         function nextQuestion() {
             currentQuestionIndex++;
             // Reset option styling and enable clicks
             const options = document.querySelectorAll('.quiz-option');
              options.forEach(option => {
                 option.style.pointerEvents = 'auto';
                 option.classList.remove('selected', 'correct', 'incorrect', 'correct-answer-highlight');
             });

             if (currentQuestionIndex < currentQuiz.questions.length) {
                 displayQuestion();
             } else {
                 showScore();
             }
         }

         function showScore() {
             const quizContainer = document.getElementById('quiz-container');
             const scoreContainer = document.getElementById('quiz-score-container');
             const scoreElement = document.getElementById('quiz-score');
             const totalElement = document.getElementById('quiz-total');
             const badgeElement = document.getElementById('quiz-badge');

             if (quizContainer) quizContainer.style.display = 'none'; // Hide question area
             if (scoreContainer) scoreContainer.style.display = 'block';

             if (scoreElement) scoreElement.textContent = score;
             if (totalElement) totalElement.textContent = currentQuiz.questions.length;

             const percentage = Math.round((score / currentQuiz.questions.length) * 100);
             if (badgeElement) badgeElement.textContent = percentage + "%";

             // Update overall course progress based on quiz completion/score
              markQuizCompleted(currentQuiz.id, score, currentQuiz.questions.length);
         }


        // ==============================================================
        // PROGRESS TRACKING
        // ==============================================================
         let courseProgress = {
             lecturesViewed: [], // Store lecture numbers, e.g., [1, 5]
             casesViewed: [], // Store case study numbers
             quizzesAttempted: [], // Store quiz numbers attempted
             quizzesCompleted: {}, // Store quiz scores { quizId: { score: X, total: Y } }
             gameProgress: {} // Store game level/state
         };

         function initializeProgressTracking() {
             const savedProgress = localStorage.getItem('courseProgress');
             if (savedProgress) {
                 courseProgress = JSON.parse(savedProgress);
             }
             updateProgressBar();
              updateCompletionMarkers(); // Add icons for completed items
         }

         function saveProgress() {
             localStorage.setItem('courseProgress', JSON.stringify(courseProgress));
             updateProgressBar();
              updateCompletionMarkers();
         }

         function markLectureCompleted(lectureNum) {
             lectureNum = parseInt(lectureNum);
             if (!courseProgress.lecturesViewed.includes(lectureNum)) {
                 courseProgress.lecturesViewed.push(lectureNum);
                 saveProgress();
                  // Optionally show a completion modal
                  showModal('lecture-completed-modal');
             }
         }

          function markCaseStudyCompleted(caseNum) {
             caseNum = parseInt(caseNum);
             if (!courseProgress.casesViewed.includes(caseNum)) {
                 courseProgress.casesViewed.push(caseNum);
                 saveProgress();
                  // Optionally show a completion modal
                  showModal('case-completed-modal');
             }
         }

          function markQuizAttempted(quizId) {
             quizId = parseInt(quizId);
              if (!courseProgress.quizzesAttempted.includes(quizId)) {
                  courseProgress.quizzesAttempted.push(quizId);
                  // Don't save progress here, wait for completion to save score
              }
          }

         function markQuizCompleted(quizId, score, total) {
             quizId = parseInt(quizId);
             courseProgress.quizzesCompleted[quizId] = { score: score, total: total };
             // Also mark as attempted if not already
             if (!courseProgress.quizzesAttempted.includes(quizId)) {
                  courseProgress.quizzesAttempted.push(quizId);
             }
             saveProgress();
         }

         // Add functions for game progress if needed
         // function saveGameProgress(gameState) { ... }


         function calculateCompletionPercentage() {
             const totalLectures = 5;
             const totalCases = 5;
             const totalQuizzes = 6; // Assuming 6 quizzes
             // Add game completion criteria if applicable

             let completedItems = 0;
             const totalItems = totalLectures + totalCases + totalQuizzes; // Adjust if game counts

             completedItems += courseProgress.lecturesViewed.length;
             completedItems += courseProgress.casesViewed.length;
             // Count quizzes as completed if attempted or based on score threshold? Let's use attempted for now.
             completedItems += courseProgress.quizzesAttempted.length;
              // Or count completed with score: completedItems += Object.keys(courseProgress.quizzesCompleted).length;


             return totalItems > 0 ? Math.round((completedItems / totalItems) * 100) : 0;
         }

         function updateProgressBar() {
             const percentage = calculateCompletionPercentage();
             const progressBarFill = document.getElementById('progress-fill');
             if (progressBarFill) {
                 progressBarFill.style.width = percentage + '%';
             }

             // Check for course completion to enable certificate
              const certificateButton = document.getElementById('view-certificate-button'); // Add this button if needed
              if (certificateButton) {
                  // Define completion criteria, e.g., 100% or viewing all lectures/cases and attempting all quizzes
                  const completedAllLectures = courseProgress.lecturesViewed.length >= 5;
                  const completedAllCases = courseProgress.casesViewed.length >= 5;
                  const attemptedAllQuizzes = courseProgress.quizzesAttempted.length >= 6;

                  if (completedAllLectures && completedAllCases && attemptedAllQuizzes) { // Example criteria
                       certificateButton.disabled = false;
                       certificateButton.classList.remove('opacity-50', 'cursor-not-allowed'); // Enable button
                  } else {
                       certificateButton.disabled = true;
                       certificateButton.classList.add('opacity-50', 'cursor-not-allowed'); // Disable button
                  }
              }
         }

         function updateCompletionMarkers() {
             // Add checkmarks next to viewed lectures
             courseProgress.lecturesViewed.forEach(lecNum => {
                 // Find the button or link corresponding to the lecture card
                 const lectureButton = document.querySelector(`#lectures button[onclick*="showLecture(${lecNum})"]`); // Adjust selector
                 if (lectureButton && !lectureButton.querySelector('.completion-check')) {
                     lectureButton.insertAdjacentHTML('beforeend', ' <i class="fas fa-check-circle text-green-500 completion-check"></i>');
                 }
             });

              // Add checkmarks next to viewed case studies
              courseProgress.casesViewed.forEach(caseNum => {
                 const caseButton = document.querySelector(`#case-studies button[onclick*="showCaseStudy(${caseNum})"]`); // Adjust selector
                  if (caseButton && !caseButton.querySelector('.completion-check')) {
                     caseButton.insertAdjacentHTML('beforeend', ' <i class="fas fa-check-circle text-green-500 completion-check"></i>');
                 }
             });

              // Add checkmarks or score next to attempted/completed quizzes
             courseProgress.quizzesAttempted.forEach(quizNum => {
                 const quizButton = document.querySelector(`#quizzes button[onclick*="loadQuiz(${quizNum})"]`); // Adjust selector
                  if (quizButton && !quizButton.querySelector('.completion-check')) {
                      let scoreText = ' (Attempted)';
                      if(courseProgress.quizzesCompleted[quizNum]) {
                          scoreText = ` (${courseProgress.quizzesCompleted[quizNum].score}/${courseProgress.quizzesCompleted[quizNum].total})`;
                      }
                     quizButton.insertAdjacentHTML('afterend', `<span class="text-sm text-green-600 completion-check">${scoreText} <i class="fas fa-check-circle"></i></span>`);
                  } else if (quizButton && courseProgress.quizzesCompleted[quizNum]) {
                      // Update score if already marked as attempted
                      const scoreSpan = quizButton.nextElementSibling;
                       if (scoreSpan && scoreSpan.classList.contains('completion-check')) {
                           scoreSpan.innerHTML = ` (${courseProgress.quizzesCompleted[quizNum].score}/${courseProgress.quizzesCompleted[quizNum].total}) <i class="fas fa-check-circle"></i>`;
                       }
                  }
             });
         }


        // ==============================================================
        // CERTIFICATE HANDLING
        // ==============================================================
         function generateCertificate() {
             // Use your actual name
             const studentName = "Dr. Avneet Kaur";
             const studentId = "PFCC-" + Math.floor(100000 + Math.random() * 900000); // Generate a random-ish ID

             // Update modal content
             const nameElement = document.getElementById('certificate-name');
             const idElement = document.getElementById('certificate-id');
             const dateElement = document.getElementById('certificate-date');
              const instructorElement = document.getElementById('certificate-instructor'); // Assuming you add this ID

             if (nameElement) nameElement.textContent = studentName;
             if (idElement) idElement.textContent = studentId;
             if (dateElement) dateElement.textContent = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
              if(instructorElement) instructorElement.textContent = "Dr. Avneet Kaur"; // Set instructor name

             showModal('certificate-modal');
         }

         function printCertificate() {
             const certificateContent = document.getElementById('certificate');
             if (certificateContent) {
                 // You might need more sophisticated print styling or libraries for perfect printing
                  const printWindow = window.open('', '', 'height=600,width=800');
                 printWindow.document.write('<html><head><title>Certificate</title>');
                  // Add styles needed for printing - potentially link to a print-specific CSS
                   printWindow.document.write('<style> /* Add essential print styles here */ body { margin: 20px; } #certificate { border: 10px solid #1a56db !important; padding: 2rem !important; } </style>');
                 printWindow.document.write('</head><body>');
                 printWindow.document.write(certificateContent.innerHTML);
                 printWindow.document.write('</body></html>');
                 printWindow.document.close();
                 printWindow.focus(); // Necessary for some browsers
                 setTimeout(function() { // Timeout needed for content to render in some browsers
                     printWindow.print();
                     printWindow.close();
                 }, 250);

             }
         }

         // Add a button to the HTML to trigger certificate generation if criteria met
          // Example: <button id="view-certificate-button" onclick="generateCertificate()" disabled class="opacity-50 cursor-not-allowed ...">View Certificate</button>
          // Make sure updateProgressBar enables/disables this button.


        // ==============================================================
        // OTHER UTILITIES (Dark Mode, Downloads etc.)
        // ==============================================================

         function toggleDarkMode() {
             document.body.classList.toggle('dark-mode');
             // Save preference
             if (document.body.classList.contains('dark-mode')) {
                 localStorage.setItem('theme', 'dark');
             } else {
                 localStorage.setItem('theme', 'light');
             }
         }

         // Check for saved theme preference on load
         if (localStorage.getItem('theme') === 'dark') {
             document.body.classList.add('dark-mode');
         }

         // Add event listener for a theme toggle button (if you add one)
         // const themeToggleButton = document.getElementById('theme-toggle');
         // if (themeToggleButton) {
         //     themeToggleButton.addEventListener('click', toggleDarkMode);
         // }

         // Handle resource download buttons (Placeholder alert)
         function setupDownloadButtons() {
              document.querySelectorAll('.resource-download').forEach(button => {
                 button.addEventListener('click', function(e) {
                     e.preventDefault(); // Prevent default link behavior if it's an <a> tag
                     alert("Download functionality would be enabled in a full deployment with actual resource files.");

                      // Update download counter visually for demo
                     const counterSpan = this.nextElementSibling; // Assumes counter is immediately after button
                      if (counterSpan && counterSpan.querySelector('i.fa-download')) {
                          const currentCount = parseInt(counterSpan.textContent.match(/\d+/)[0]);
                          counterSpan.innerHTML = `<i class="fas fa-download"></i> ${currentCount + 1}`;
                      }
                 });
             });
         }


         // ==============================================================
         // INTERACTIVE GAME LOGIC (Placeholder - Needs specific implementation)
         // ==============================================================
          function setupGame() {
              const startButton = document.getElementById('start-scenario');
              if (startButton) {
                  startButton.addEventListener('click', startGame);
              }
              // Add listeners for choice buttons etc.
          }

          function startGame() {
              const introDiv = document.getElementById('level-intro');
              const contentDiv = document.getElementById('scenario-content');
              if (introDiv) introDiv.style.display = 'none';
              if (contentDiv) contentDiv.style.display = 'block';
              // Load first stage of the scenario
              loadGameStage('introduction'); // Assuming 'introduction' is the first stage ID
          }

          function loadGameStage(stageId) {
              // This needs the actual game data structure
              // Find stage data based on stageId
              // Update #scenario-stage-title, #scenario-prompt, #scenario-choices
              console.log("Loading game stage: " + stageId);
              // Example based on provided snippet:
               if (stageId === 'introduction') {
                   document.getElementById('scenario-stage-title').textContent = 'Introduction';
                   document.getElementById('scenario-prompt').textContent = 'How do you begin your conversation with Fatima?';
                   // Setup choice buttons based on game data structure
                    setupChoiceButtons([
                       { id: 'medical', text: "Let's check your blood glucose readings..." },
                       { id: 'open', text: "How have things been going for you...?" },
                       { id: 'social', text: "How are you and your family doing today?" }
                    ]);
               }
               // Add logic for other stages ('living_situation', etc.)
          }

           function setupChoiceButtons(choices) {
              const choicesDiv = document.getElementById('scenario-choices');
              if (!choicesDiv) return;
              choicesDiv.innerHTML = ''; // Clear previous choices
              choices.forEach(choice => {
                  const button = document.createElement('button');
                  button.classList.add('choice-btn');
                  button.dataset.choice = choice.id; // Store choice ID
                  button.textContent = choice.text;
                  button.addEventListener('click', () => handleChoice(choice.id));
                  choicesDiv.appendChild(button);
              });
          }

          function handleChoice(choiceId) {
               // Process the choice based on game logic
               console.log("Player chose: " + choiceId);
               // Find feedback and next stage based on choiceId and current stage
               // Example:
               const feedback = getFeedbackForChoice(choiceId); // Implement this based on game data
               const nextStageId = getNextStageForChoice(choiceId); // Implement this

               displayFeedback(feedback);

               // Show continue button to proceed
                const continueButtonContainer = document.getElementById('scenario-continue');
               if (continueButtonContainer) {
                    continueButtonContainer.style.display = 'block';
                    const continueBtn = continueButtonContainer.querySelector('button');
                     // Remove previous listener to avoid stacking them
                     const newBtn = continueBtn.cloneNode(true);
                     continueBtn.parentNode.replaceChild(newBtn, continueBtn);
                     newBtn.addEventListener('click', () => loadGameStage(nextStageId), { once: true }); // Go to next stage on click
               }

               // Disable choice buttons after selection
                document.querySelectorAll('.choice-btn').forEach(btn => btn.disabled = true);
           }

           function displayFeedback(feedbackText) {
               const feedbackDiv = document.getElementById('scenario-feedback');
               if (feedbackDiv) {
                   feedbackDiv.textContent = feedbackText;
                   feedbackDiv.style.display = 'block';
               }
           }

           // Placeholder functions - replace with actual logic based on game data structure
           function getFeedbackForChoice(choiceId) {
               if (choiceId === 'medical') return "This approach jumps straight to clinical data...";
               if (choiceId === 'open') return "This open-ended question allows Fatima to share...";
               if (choiceId === 'social') return "This acknowledges Fatima's family context...";
               return "Feedback not found.";
           }
            function getNextStageForChoice(choiceId) {
               // All choices in the example go to 'living_situation'
               return 'living_situation'; // Replace with actual next stage logic
           }
           // Need to implement loadGameStage('living_situation') and further stages.


        // ==============================================================
        // END OF SCRIPT
        // ==============================================================

    </script>
</body>
</html>
