<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient and Family-Centered Care Course</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css">
    <style>
        /* Custom styles */
        .slide { display: none; }
        .slide.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.5); z-index: 1000; align-items: center; justify-content: center; animation: fadeIn 0.3s ease; }
        .modal.show { display: flex; }
        .modal-content { background-color: white; border-radius: 8px; max-width: 800px; width: 90%; max-height: 90vh; overflow-y: auto; padding: 2rem; position: relative; animation: modalSlideIn 0.3s ease; }
        @keyframes modalSlideIn { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .progress-bar { height: 5px; background-color: #e2e8f0; width: 100%; position: relative; }
        .progress-fill { height: 100%; background-color: #1a56db; width: 0%; transition: width 0.3s ease; }
        .container.mx-auto.px-4.py-8 > section { display: none; } /* Hide all sections by default */
        section#home { display: block; } /* Show home section initially */
        .signature-name { margin-bottom: 0.5rem; border-bottom: 1px solid #2d3748; padding-bottom: 0.5rem; }
        .slide-dot { width: 8px; height: 8px; border-radius: 50%; background-color: #cbd5e0; cursor: pointer; transition: background-color 0.3s; display: inline-block; margin: 0 3px; }
        .slide-dot.active { background-color: #1a56db; }
        .scenario-container { background-color: white; border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .choice-btn { width: 100%; text-align: left; padding: 0.75rem 1rem; margin-bottom: 0.5rem; border: 1px solid #e2e8f0; border-radius: 4px; background-color: #f8fafc; transition: all 0.3s; }
        .choice-btn:hover { background-color: #edf2f7; transform: translateY(-2px); }
        .feedback-container { background-color: #f0f7ff; border-left: 4px solid #1a56db; padding: 1rem; margin: 1rem 0; border-radius: 4px; display: none; }
        .reflection-container { margin-top: 1.5rem; display: none; }
        .quiz-option { padding: 1rem; background-color: #f8fafc; border: 1px solid #e2e8f0; border-radius: 4px; margin-bottom: 0.5rem; cursor: pointer; transition: all 0.3s; position: relative; padding-left: 2.5rem; }
        .quiz-option:hover { background-color: #e1effe; transform: translateX(5px); }
        .quiz-option::before { content: ""; position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); width: 16px; height: 16px; border: 1px solid #cbd5e0; border-radius: 50%; }
        .quiz-option.selected { background-color: #1a56db; color: white; border-color: #1a56db; }
        .quiz-option.selected::before { background-color: white; border-color: white; }
        .quiz-feedback { padding: 1rem; border-radius: 4px; margin-top: 1rem; display: none; animation: fadeIn 0.5s ease; }
        .quiz-feedback.correct { background-color: #c6f6d5; color: #22543d; border-left: 4px solid #38a169; }
        .quiz-feedback.incorrect { background-color: #fed7d7; color: #822727; border-left: 4px solid #e53e3e; }
        /* Add style for highlighting correct answer on incorrect choice */
        .quiz-option.correct-answer-highlight { background-color: #c6f6d5 !important; border-color: #38a169 !important; color: #22543d !important; }
        .quiz-option.correct-answer-highlight::before { border-color: #38a169 !important; }
        /* Add completion checkmark style */
         .completion-check { margin-left: 8px; font-size: 0.9em; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <header class="bg-blue-700 text-white py-6 px-4 md:px-8">
        <div class="container mx-auto">
            <div class="flex flex-wrap justify-between items-center">
                <h1 class="text-2xl font-bold">Patient and Family-Centered Care</h1>
                <div class="text-right">
                    <p class="text-sm">One-Week Intensive Course</p>
                    <p class="text-sm">Professional Development for Healthcare Providers</p>
                </div>
            </div>
        </div>
    </header>

    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto">
            <ul class="flex flex-wrap text-sm md:text-base">
                <li><a href="#home" class="nav-link active block px-4 py-3 font-medium hover:text-blue-700 border-b-2 border-blue-700 transition-colors" onclick="showSection('home'); return false;">Home</a></li>
                <li><a href="#lectures" class="nav-link block px-4 py-3 font-medium hover:text-blue-700 border-b-2 border-transparent hover:border-blue-700 transition-colors" onclick="showSection('lectures'); return false;">Lectures</a></li>
                <li><a href="#case-studies" class="nav-link block px-4 py-3 font-medium hover:text-blue-700 border-b-2 border-transparent hover:border-blue-700 transition-colors" onclick="showSection('case-studies'); return false;">Case Studies</a></li>
                <li><a href="#quizzes" class="nav-link block px-4 py-3 font-medium hover:text-blue-700 border-b-2 border-transparent hover:border-blue-700 transition-colors" onclick="showSection('quizzes'); return false;">Quizzes</a></li>
                <li><a href="#resources" class="nav-link block px-4 py-3 font-medium hover:text-blue-700 border-b-2 border-transparent hover:border-blue-700 transition-colors" onclick="showSection('resources'); return false;">Resources</a></li>
                <li><a href="#game" class="nav-link block px-4 py-3 font-medium hover:text-blue-700 border-b-2 border-transparent hover:border-blue-700 transition-colors" onclick="showSection('game'); return false;">Interactive Game</a></li>
                 <li><button id="view-certificate-button" onclick="generateCertificate()" disabled class="nav-link block px-4 py-3 font-medium text-gray-400 cursor-not-allowed border-b-2 border-transparent">Certificate</button></li>
            </ul>
        </div>
    </nav>

    <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
    </div>

    <div class="container mx-auto px-4 py-8">
        <section id="home" class="mb-16">
            <div class="flex flex-col md:flex-row gap-8 mb-8">
                 <div class="flex-1">
                     <h2 class="text-2xl font-bold text-blue-800 mb-4">Welcome to Patient and Family-Centered Care</h2>
                     <p class="mb-4">This one-week intensive course is designed to provide healthcare professionals with the knowledge and skills needed to implement patient and family-centered care approaches in various healthcare settings.</p>
                     <p class="mb-4">The course combines theoretical foundations with practical case studies and interactive learning to help you transform your practice.</p>
                     <div class="mt-6">
                         <button class="inline-block px-4 py-2 bg-blue-700 text-white rounded font-medium hover:bg-blue-800 transition-colors" onclick="showSection('lectures'); return false;">Start Learning</button>
                         <button class="inline-block px-4 py-2 border border-blue-700 text-blue-700 rounded font-medium ml-2 hover:bg-blue-50 transition-colors" onclick="showModal('welcome-modal'); return false;">Course Overview</button>
                     </div>
                 </div>
                 <div class="flex-1">
                     <div class="bg-blue-50 p-6 rounded-lg border-l-4 border-blue-700">
                         <h3 class="text-xl font-semibold mb-4">Course Highlights</h3>
                         <p class="flex items-center mb-3"><i class="fas fa-calendar-alt text-blue-700 mr-3"></i> <strong>Duration:</strong> One-week intensive (Monday to Friday)</p>
                         <p class="flex items-center mb-3"><i class="fas fa-book text-blue-700 mr-3"></i> <strong>5 Lectures:</strong> Comprehensive modules covering all aspects of PFCC</p>
                         <p class="flex items-center mb-3"><i class="fas fa-user-md text-blue-700 mr-3"></i> <strong>5 Case Studies:</strong> Real-world applications and examples</p>
                         <p class="flex items-center mb-3"><i class="fas fa-tasks text-blue-700 mr-3"></i> <strong>Interactive Quizzes:</strong> Test your knowledge as you learn</p>
                         <p class="flex items-center mb-3"><i class="fas fa-certificate text-blue-700 mr-3"></i> <strong>Certificate:</strong> Upon successful completion of the course</p>
                     </div>
                 </div>
             </div>
             <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                 <h3 class="text-xl font-bold text-blue-800 mb-4 pb-2 border-b border-blue-100">The Four Core Principles</h3>
                 <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-6"> /* Principles cards... */ </div>
             </div>
              <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                 <h3 class="text-xl font-bold text-blue-800 mb-4">Weekly Schedule</h3>
                  <div class="overflow-auto"> /* Schedule Table... */ </div>
             </div>
              <div class="bg-white rounded-lg shadow-md p-6">
                 <h3 class="text-xl font-bold text-blue-800 mb-4">Learning Outcomes</h3>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-4"> /* Outcomes grid... */ </div>
              </div>
            </section>

        <section id="lectures" class="mb-16" style="display:none;">
             <h2 class="text-2xl font-bold text-blue-800 mb-4">Course Lectures</h2>
             <p class="mb-6">Select a lecture to view its content:</p>
             <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                  <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all transform hover:-translate-y-1">
                     <div class="p-4 bg-blue-50 border-l-4 border-blue-700"> /* Title */ </div>
                     <div class="p-4"> /* Description & Button */
                          <button class="inline-block ..." onclick="showLecture(1)">View Lecture</button>
                     </div>
                 </div>
                  </div>
             <div id="lecture1" class="lecture-slides bg-white rounded-lg shadow-md" style="display:none;">
                  <div class="slide-container"><div class="slides"><div class="slide active" data-slide="1">SLIDE 1 CONTENT</div><div class="slide" data-slide="2">SLIDE 2 CONTENT</div></div><div class="slide-navigation"> /* Nav controls */ </div></div>
                  </div>
             <div id="lecture2" class="lecture-slides bg-white rounded-lg shadow-md" style="display:none;">
                  </div>
             <div id="lecture3" class="lecture-slides bg-white rounded-lg shadow-md" style="display:none;">
                   </div>
             <div id="lecture4" class="lecture-slides bg-white rounded-lg shadow-md" style="display:none;">
                  </div>
             <div id="lecture5" class="lecture-slides bg-white rounded-lg shadow-md" style="display:none;">
                  </div>
        </section>

        <section id="case-studies" class="mb-16" style="display:none;">
             <h2 class="text-2xl font-bold text-blue-800 mb-4">Case Studies</h2>
             <p class="mb-6">Explore real-world applications...</p>
             <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                  <div class="bg-white rounded-lg shadow-md overflow-hidden ...">
                      <div class="p-4 bg-blue-50 ..."> /* Title */ </div>
                      <div class="p-4"> /* Description & Button */
                         <button class="inline-block ..." onclick="showCaseStudy(1)">View Case Study</button>
                      </div>
                  </div>
                   </div>
             <div id="case-study1" class="case-study bg-white rounded-lg shadow-md p-6" style="display:none;">
                 <h3 class="text-xl ...">Case Study 1: Bronson...</h3>
                  <div class="case-overview">...</div>
                  <h4>Background</h4> <p>...</p>
                  <h4>Key Initiatives</h4> <ul>...</ul>
                  <div class="bg-blue-50 ..."><h4>Implementation Strategy</h4><ol>...</ol></div>
                  <h4>Outcomes</h4> <div class="grid ..."> /* Outcome boxes */ </div>
                  <h4>Discussion Questions</h4> <ol>...</ol>
                  <div class="mt-6 ...">
                      <button ... onclick="takeCaseStudyQuiz(1); return false;">Take Quiz</button>
                      <button ... onclick="showModal('bronson-resources'); return false;">Access Resources</button>
                  </div>
                 </div>
             <div id="case-study2" class="case-study bg-white rounded-lg shadow-md p-6" style="display:none;">
                  </div>
             <div id="case-study3" class="case-study bg-white rounded-lg shadow-md p-6" style="display:none;">
                   </div>
             <div id="case-study4" class="case-study bg-white rounded-lg shadow-md p-6" style="display:none;">
                   </div>
             <div id="case-study5" class="case-study bg-white rounded-lg shadow-md p-6" style="display:none;">
                   </div>
        </section>

        <section id="quizzes" class="mb-16" style="display:none;">
             <h2 class="text-2xl font-bold text-blue-800 mb-4">Knowledge Assessment Quizzes</h2>
             <p class="mb-6">Test your understanding...</p>
             <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                   <div class="bg-white rounded-lg shadow-md overflow-hidden ...">
                       <div class="p-4 bg-blue-50 ..."> /* Title */ </div>
                       <div class="p-4"> /* Description & Button */
                          <button class="inline-block ..." data-quiz-id="1">Start Quiz</button>
                       </div>
                   </div>
                   </div>
             <div id="quiz-container" class="quiz-container bg-white rounded-lg shadow-md p-6" style="display:none;">
                 <h3 id="quiz-title" class="text-xl ...">Quiz Title</h3>
                 <div id="quiz-question" class="mb-6"></div>
                 <ul id="quiz-options" class="mb-6"></ul>
                 <div id="quiz-feedback" class="quiz-feedback"></div>
                 <div class="flex justify-between mt-6">
                     <button id="quiz-submit" class="px-4 ...">Submit Answer</button>
                     <button id="quiz-next" class="px-4 ..." style="display:none;">Next Question</button>
                 </div>
                 <div id="quiz-score-container" class="text-center ... hidden">
                      <h4 class="text-lg ...">Quiz Complete!</h4>
                     <div class="w-24 h-24 ..." id="quiz-badge">0%</div>
                     <p class="mb-4">You scored <span id="quiz-score">0</span> out of <span id="quiz-total">0</span>...</p>
                     <button class="px-4 ..." onclick="showSection('quizzes')">Return to Quizzes</button>
                 </div>
             </div>
        </section>

        <section id="resources" class="mb-16" style="display:none;">
             <h2 class="text-2xl font-bold text-blue-800 mb-4">Resources</h2>
             <p class="mb-6">Access additional materials...</p>
             <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                   <div class="bg-white rounded-lg shadow-md overflow-hidden">
                      <div class="h-36 bg-blue-100 flex ..."><i class="fas fa-file-pdf ..."></i></div>
                      <div class="p-4">
                          <h3 class="font-semibold ...">PFCC Implementation Guide</h3>
                          <p class="text-sm ..."><i class="fas fa-file-pdf ..."></i> PDF Guide</p>
                          <p class="text-sm ...">Comprehensive guide...</p>
                          <div class="flex justify-between ...">
                              <button class="px-3 py-1 ... resource-download">Download</button>
                              <span><i class="fas fa-download"></i> 487</span>
                          </div>
                      </div>
                  </div>
                  </div>
             <div class="bg-white rounded-lg shadow-md p-6">
                 <h3 class="text-xl font-bold text-blue-800 mb-4">Research Publications</h3>
                 <ul class="divide-y">
                       <li class="py-4">
                          <div class="flex"> <i class="fas fa-file-alt ..."></i> <div><p>Chen, S., ...</p><p>Journal...</p></div></div>
                      </li>
                       </ul>
             </div>
             </section>

        <section id="game" class="mb-16" style="display:none;">
              <h2 class="text-2xl font-bold text-blue-800 mb-4">Interactive PFCC Scenario Game</h2>
             <p class="mb-6">Apply PFCC principles...</p>
              <div id="game-container" class="game-container bg-white rounded-lg shadow-md p-6">
                 <div id="level-intro"> /* Intro content and Start button */ </div>
                 <div id="scenario-content" class="scenario-container" style="display:none;"> /* Stage title, prompt, choices, feedback, continue button */ </div>
                 <div id="reflection-container" class="reflection-container"> /* Reflection content */ </div>
             </div>
             </section>

    </div> <footer class="bg-gray-800 text-gray-300 py-8 mt-16">
        <div class="container mx-auto text-center">
            <p>&copy; 2024 Dr. Avneet Kaur. All rights reserved.</p>
            <p>Patient and Family-Centered Care Course</p>
        </div>
    </footer>

    <div id="welcome-modal" class="modal">
         <div class="modal-content">
              <button class="modal-close" onclick="closeModal('welcome-modal')"><i class="fas fa-times"></i></button>
              <h3 class="modal-title">Welcome!...</h3>
              <div><p>...</p></div>
          </div>
         </div>
     <div id="lecture-completed-modal" class="modal">
          </div>
     <div id="case-completed-modal" class="modal">
          </div>
     <div id="certificate-modal" class="modal">
           <div class="modal-content" style="max-width: 800px;">
             <button class="modal-close" onclick="closeModal('certificate-modal')"><i class="fas fa-times"></i></button>
             <div id="certificate" style="border: 10px solid #1a56db; padding: 2rem; text-align: center; background-color: #fff; position: relative;">
                 <div style="position: absolute; top: 10px; right: 10px; font-size: 0.8rem; color: #718096;">ID: <span id="certificate-id">PFCC-123456</span></div>
                 <h2 style="font-size: 2rem; color: #1a56db; margin-bottom: 1rem;">Certificate of Completion</h2>
                 <p style="font-size: 1.2rem; margin-bottom: 1rem;">This certifies that</p>
                 <p style="font-size: 1.8rem; font-weight: bold; color: #2d3748; margin-bottom: 1rem;" id="certificate-name">Student Name</p>
                 <p style="font-size: 1.2rem; margin-bottom: 0.5rem;">has successfully completed the</p>
                 <p style="font-size: 1.5rem; font-weight: bold; color: #1a56db; margin-bottom: 1.5rem;">Patient and Family-Centered Care Course</p>
                 <p style="font-size: 1rem; margin-bottom: 2rem;">Demonstrating proficiency in PFCC principles, implementation strategies, and best practices</p>
                 <div style="display: flex; justify-content: space-between; margin-top: 2rem; border-top: 1px solid #ccc; padding-top: 1rem;">
                     <div style="text-align: left;">
                         <p style="margin-bottom: 0.5rem; font-size: 0.9rem;" id="certificate-date">April 5, 2025</p>
                         <p style="font-size: 0.8rem; color: #4a5568;">Date</p>
                     </div>
                     <div style="text-align: right;">
                         <p class="signature-name" id="certificate-instructor">Dr. Avneet Kaur</p>
                         <p style="font-size: 0.8rem; color: #4a5568;">Course Director</p>
                     </div>
                 </div>
             </div>
             <div style="margin-top: 1.5rem; text-align: center;">
                 <button class="btn" onclick="printCertificate()"><i class="fas fa-print"></i> Print Certificate</button>
                 <button class="btn btn-outline" onclick="closeModal('certificate-modal')">Close</button>
             </div>
         </div>
          </div>
     <div id="bronson-resources" class="modal">
          </div>
     <div id="picu-resources" class="modal">
          </div>


    <script>
        // ==============================================================
        // DATA DEFINITIONS (e.g., Quizzes)
        // ==============================================================

        const quizzes = {
            1: {
                id: 1, title: "Quiz 1: Foundations of PFCC", questions: [
                    { question: "Which of the following best defines Patient and Family-Centered Care?", options: ["A model where healthcare providers make all decisions for patients", "An approach to healthcare that forms partnerships among practitioners, patients, and families", "A system where family members take primary responsibility for patient care", "A method focused exclusively on patient autonomy and independence"], correctAnswer: 1, explanation: "PFCC is defined as an approach to the planning, delivery, and evaluation of healthcare that forms mutually beneficial partnerships among patients, families, and healthcare practitioners." },
                    { question: "Which is NOT one of the four core principles of PFCC?", options: [ "Dignity and Respect", "Information Sharing", "Cost Efficiency", "Participation" ], correctAnswer: 2, explanation: "The four core principles of PFCC are Dignity and Respect, Information Sharing, Participation, and Collaboration. While cost efficiency may be a positive outcome of PFCC, it is not one of the core principles." },
                    { question: "According to historical development, when did the Institute of Medicine identify patient-centered care as one of six aims for healthcare improvement?", options: [ "1970s", "1980s", "1990s", "2000s" ], correctAnswer: 3, explanation: "The Institute of Medicine (now the National Academy of Medicine) identified patient-centered care as one of six aims for healthcare improvement in its landmark 2001 report 'Crossing the Quality Chasm.'" },
                    { question: "Which of the following is an evidence-based outcome of implementing PFCC?", options: [ "Increased healthcare costs", "Reduced patient engagement", "Improved clinical outcomes", "Decreased provider job satisfaction" ], correctAnswer: 2, explanation: "Research has consistently demonstrated that PFCC implementation is associated with improved clinical outcomes, including better adherence to treatment plans, reduced readmissions, and improved health status." },
                    { question: "What historical trend contributed significantly to the development of PFCC?", options: [ "Increasing specialization in medicine", "Consumer advocacy movements", "Growth of for-profit healthcare", "Reduction in family size" ], correctAnswer: 1, explanation: "Consumer advocacy movements in the 1960s and 1970s, which emphasized patient rights and autonomy, were a major catalyst for the development of patient-centered approaches to care." },
                    { question: "In the context of PFCC, what does 'dignity and respect' primarily refer to?", options: [ "Allowing patients unrestricted access to all medical records", "Honoring patient and family perspectives and choices", "Ensuring all patients receive identical treatment regardless of background", "Providing luxury accommodations in healthcare facilities" ], correctAnswer: 1, explanation: "Dignity and Respect in PFCC refers to listening to and honoring patient and family perspectives and choices, incorporating their knowledge, values, beliefs, and cultural backgrounds into the planning and delivery of care." },
                    { question: "Which statement about families in PFCC is most accurate?", options: [ "PFCC defines 'family' as blood relatives only", "PFCC views families primarily as visitors in healthcare settings", "In PFCC, patients define who constitutes their 'family'", "PFCC considers families important only for pediatric patients" ], correctAnswer: 2, explanation: "A fundamental principle of PFCC is that patients define who constitutes their 'family' and how they will be involved in care and decision-making. This recognizes diverse family structures and relationships." },
                    { question: "What is a key characteristic that distinguishes PFCC from traditional approaches to healthcare?", options: [ "Focus on advanced technology", "Emphasis on specialty care", "Partnership approach to healthcare relationships", "Standardized treatment protocols" ], correctAnswer: 2, explanation: "A key distinguishing characteristic of PFCC is its emphasis on partnership rather than paternalism in healthcare relationships. This represents a shift from provider-centered to patient and family-centered approaches." },
                    { question: "Which organization has been a leading advocate for Patient and Family-Centered Care since the 1990s?", options: [ "World Health Organization", "Institute for Patient and Family-Centered Care", "Centers for Disease Control and Prevention", "Joint Commission" ], correctAnswer: 1, explanation: "The Institute for Patient and Family-Centered Care (formerly the Institute for Family-Centered Care) has been a leading advocate and resource for advancing the practice of patient and family-centered care since the 1990s." },
                    { question: "How does PFCC view the role of patients and families in healthcare?", options: [ "As recipients of care only", "As visitors in healthcare settings", "As essential members of the healthcare team", "As secondary to the provider-patient relationship" ], correctAnswer: 2, explanation: "PFCC views patients and families as essential members of the healthcare team, recognizing their expertise about their own health experiences and needs, and valuing their input in all aspects of care." }
                ]
            },
            2: {
                id: 2, title: "Quiz 2: Core Principles in Practice", questions: [ /* Add Quiz 2 Questions Here */ ]
            },
            3: {
                id: 3, title: "Quiz 3: Communication Skills for PFCC", questions: [ /* Add Quiz 3 Questions Here */ ]
            },
            4: {
                id: 4, title: "Quiz 4: Building Systems to Support PFCC", questions: [ /* Add Quiz 4 Questions Here */ ]
            },
            5: {
                id: 5, title: "Quiz 5: Measuring and Improving PFCC Outcomes", questions: [ /* Add Quiz 5 Questions Here */ ]
            },
            6: {
                id: 6, title: "Quiz 6: Cultural Aspects of PFCC", questions: [ /* Add Quiz 6 Questions Here */ ]
            }
        };

        // ==============================================================
        // CORE NAVIGATION / SECTION DISPLAY LOGIC
        // ==============================================================

        function showSection(sectionId) {
            const sections = document.querySelectorAll('.container.mx-auto.px-4.py-8 > section[id]');
            sections.forEach(section => {
                section.style.display = 'none';
            });

            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.style.display = 'block';
            } else {
                console.error("Section with ID '" + sectionId + "' not found!");
            }

            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.classList.remove('active');
                const onclickAttr = link.getAttribute('onclick');
                if (onclickAttr && onclickAttr.includes("showSection('" + sectionId + "')")) {
                    link.classList.add('active');
                }
            });

            const container = document.querySelector('.container.mx-auto.px-4.py-8');
            if (container) {
                 window.scrollTo({ top: container.offsetTop - 80, behavior: 'smooth' });
            } else {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
             updateProgressBar();
        }

        // ==============================================================
        // MODAL HANDLING
        // ==============================================================
         function showModal(modalId) { /* ... as before ... */ }
         function closeModal(modalId) { /* ... as before ... */ }
         window.addEventListener('click', function(event) { /* ... close on overlay click ... */ });
         function setupModalButtons() { /* ... as before ... */ }

        // ==============================================================
        // LECTURE SLIDES HANDLING
        // ==============================================================
         let lectureStates = {};
         function initializeLectureSlides() { /* ... as before ... */ }
         function updateSlideView(lectureId) { /* ... as before ... */ }
         function setupSlideNavigation(lectureId) { /* ... as before ... */ }
         function nextSlide(lectureId) { /* ... as before, includes call to markLectureCompleted ... */ }
         function prevSlide(lectureId) { /* ... as before ... */ }
         function goToSlide(slideNumber, lectureId) { /* ... as before, includes call to markLectureCompleted ... */ }

        // Refined showLecture: Just scrolls after showSection handles display
        function showLecture(lectureNum) {
             const lectureElement = document.getElementById('lecture' + lectureNum);
             if (lectureElement) {
                 // Ensure the main #lectures section is visible first
                 showSection('lectures');
                 // Allow time for display change before scrolling
                  setTimeout(() => {
                       lectureElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                       // Ensure slides are initialized for this lecture if not already
                       if (!lectureStates['lecture' + lectureNum]) {
                            initializeLectureSlides(); // May need more targeted init
                       }
                  }, 50); // Small delay
             } else {
                 console.error('Lecture element lecture' + lectureNum + ' not found');
             }
         }

        // ==============================================================
        // CASE STUDY HANDLING
        // ==============================================================
         function initializeCaseStudies() { /* ... as before ... */ }
         // Refined showCaseStudy: Just scrolls after showSection handles display
         function showCaseStudy(caseNum) {
             const caseStudyElement = document.getElementById('case-study' + caseNum);
             if (caseStudyElement) {
                  // Ensure the main #case-studies section is visible first
                  showSection('case-studies');
                   // Allow time for display change before scrolling
                  setTimeout(() => {
                       caseStudyElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        markCaseStudyCompleted(caseNum);
                  }, 50); // Small delay
             } else {
                 console.error('Case study element case-study' + caseNum + ' not found');
             }
         }
         function takeCaseStudyQuiz(caseNum) { /* ... as before ... */ }

        // ==============================================================
        // QUIZ HANDLING
        // ==============================================================
         let currentQuiz = null;
         let currentQuestionIndex = 0;
         let score = 0;
         let selectedAnswer = null;

         function setupQuizButtons() {
             document.querySelectorAll('[data-quiz-id]').forEach(button => {
                  const quizNum = parseInt(button.getAttribute('data-quiz-id'));
                  if (!isNaN(quizNum)) {
                      button.addEventListener('click', function(e) {
                          e.preventDefault();
                          // Hide quiz cards grid and show quiz container
                           const quizListSection = document.getElementById('quizzes');
                          const quizCardGrid = quizListSection?.querySelector('.grid'); // Adjust if selector is different
                          const quizContainer = document.getElementById('quiz-container');
                           if(quizCardGrid) quizCardGrid.style.display = 'none';
                           if(quizContainer) quizContainer.style.display = 'block';
                           loadQuiz(quizNum);
                      });
                  }
             });
             // Setup submit and next buttons
              const submitButton = document.getElementById('quiz-submit');
              const nextButton = document.getElementById('quiz-next');
              if (submitButton) submitButton.addEventListener('click', submitAnswer);
              if (nextButton) nextButton.addEventListener('click', nextQuestion);
              // Setup "Return to Quizzes" button
               const returnButton = document.querySelector('#quiz-score-container button');
               if(returnButton) {
                    returnButton.addEventListener('click', function() {
                        const quizListSection = document.getElementById('quizzes');
                        const quizCardGrid = quizListSection?.querySelector('.grid'); // Adjust if selector is different
                        const scoreContainer = document.getElementById('quiz-score-container');
                         if(scoreContainer) scoreContainer.style.display = 'none';
                         if(quizCardGrid) quizCardGrid.style.display = 'grid'; // Show grid again
                         // Optionally, call showSection('quizzes') again if needed
                    });
               }
         }

         function loadQuiz(quizId) { /* ... as before, BUT remove showSection call from here ... */
             currentQuiz = quizzes[quizId];
             if (!currentQuiz) { console.error("Quiz ID " + quizId + " not found."); return; }
             currentQuestionIndex = 0; score = 0; selectedAnswer = null;
             const quizContainer = document.getElementById('quiz-container');
             const quizScoreContainer = document.getElementById('quiz-score-container');
             // Assuming quizContainer is already visible via setupQuizButtons click
             if (quizScoreContainer) quizScoreContainer.style.display = 'none';
             displayQuestion();
          }
         function displayQuestion() { /* ... as before ... */ }
         function selectOption(element, index) { /* ... as before ... */ }
         function submitAnswer() { /* ... as before, includes call to markQuizAttempted ... */ }
         function nextQuestion() { /* ... as before ... */ }
         function showScore() { /* ... as before, includes call to markQuizCompleted ... */ }

        // ==============================================================
        // PROGRESS TRACKING
        // ==============================================================
         let courseProgress = { lecturesViewed: [], casesViewed: [], quizzesAttempted: [], quizzesCompleted: {}, gameProgress: {} };
         function initializeProgressTracking() { /* ... as before ... */ }
         function saveProgress() { /* ... as before ... */ }
         function markLectureCompleted(lectureNum) { /* ... as before ... */ }
         function markCaseStudyCompleted(caseNum) { /* ... as before ... */ }
         function markQuizAttempted(quizId) { /* ... as before ... */ }
         function markQuizCompleted(quizId, score, total) { /* ... as before ... */ }
         function calculateCompletionPercentage() { /* ... as before ... */ }
         function updateProgressBar() { /* ... updated version enabling certificate button ... */
              const percentage = calculateCompletionPercentage();
             const progressBarFill = document.getElementById('progress-fill');
             if (progressBarFill) progressBarFill.style.width = percentage + '%';

              const certificateButton = document.getElementById('view-certificate-button');
              if (certificateButton) {
                  const completedAllLectures = courseProgress.lecturesViewed.length >= 5;
                  const completedAllCases = courseProgress.casesViewed.length >= 5;
                  const attemptedAllQuizzes = courseProgress.quizzesAttempted.length >= 6; // Based on 6 quizzes
                  const allDone = completedAllLectures && completedAllCases && attemptedAllQuizzes;

                  certificateButton.disabled = !allDone;
                   if (allDone) {
                       certificateButton.classList.remove('text-gray-400', 'cursor-not-allowed');
                       certificateButton.classList.add('hover:text-blue-700', 'hover:border-blue-700'); // Add hover effect back
                   } else {
                        certificateButton.classList.add('text-gray-400', 'cursor-not-allowed');
                        certificateButton.classList.remove('hover:text-blue-700', 'hover:border-blue-700');
                   }
              }
          }
         function updateCompletionMarkers() { /* ... as before ... */ }

        // ==============================================================
        // CERTIFICATE HANDLING
        // ==============================================================
         function generateCertificate() { /* ... as before ... */ }
         function printCertificate() { /* ... as before ... */ }

        // ==============================================================
        // OTHER UTILITIES (Dark Mode, Downloads etc.)
        // ==============================================================
         function toggleDarkMode() { /* ... as before ... */ }
         if (localStorage.getItem('theme') === 'dark') { document.body.classList.add('dark-mode'); }
         function setupDownloadButtons() { /* ... as before ... */ }

        // ==============================================================
        // INTERACTIVE GAME LOGIC (Placeholder)
        // ==============================================================
          function setupGame() { /* ... as before ... */ }
          function startGame() { /* ... as before ... */ }
          function loadGameStage(stageId) { /* ... as before ... */ }
          function setupChoiceButtons(choices) { /* ... as before ... */ }
          function handleChoice(choiceId) { /* ... as before ... */ }
          function displayFeedback(feedbackText) { /* ... as before ... */ }
          function getFeedbackForChoice(choiceId) { /* ... as before ... */ }
          function getNextStageForChoice(choiceId) { /* ... as before ... */ }

        // ==============================================================
        // INITIALIZATION CALL ON DOM LOADED (Already defined above, consolidated here for clarity)
        // ==============================================================
        document.addEventListener('DOMContentLoaded', function() {
            const initialSectionId = window.location.hash.substring(1);
            const validSectionIds = ['home', 'lectures', 'case-studies', 'quizzes', 'resources', 'game'];
            if (initialSectionId && validSectionIds.includes(initialSectionId)) {
                const sectionExists = document.getElementById(initialSectionId);
                if (sectionExists) { showSection(initialSectionId); }
                else { showSection('home'); }
            } else { showSection('home'); }

            initializeProgressTracking();
            initializeLectureSlides();
            initializeCaseStudies();
            setupDownloadButtons();
            setupQuizButtons();
            setupGame();
            setupModalButtons();
            // Load theme preference
            if (localStorage.getItem('theme') === 'dark') { document.body.classList.add('dark-mode'); }
        });

    </script>
</body>
</html>
